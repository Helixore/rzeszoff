<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>3D Spinning Can (CSS + JS)</title>
<style>
  :root{
    --can-width: 200px;     /* visible width of cylinder */
    --can-height: 520px;    /* visible height of cylinder */
    --slices: 72;           /* more slices = smoother wrap */
    --spin-duration: 6s;    /* rotation speed */
    --lighting: 0.18;       /* lighting intensity for shading */
  }

  html,body{
    height:100%;
    margin:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(#111,#222);
    font-family:sans-serif;
  }

  .stage{
    perspective:1200px;
    perspective-origin:50% 40%;
    width: calc(var(--can-width) * 2.2);
    height: calc(var(--can-height) * 1.3);
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .can-3d{
    width:var(--can-width);
    height:var(--can-height);
    transform-style:preserve-3d;
    position:relative;
    /* make the whole can spin */
    animation: spin var(--spin-duration) linear infinite;
    will-change: transform;
  }

  /* pause on hover */
  .can-3d:hover{
    animation-play-state: paused;
  }

  /* each vertical slice */
  .slice{
    position:absolute;
    left:50%;
    top:0;
    height:100%;
    transform-origin: center;
    background-image: url('imgs/1x/p1.png'); /* <-- image path from your upload */
    background-repeat: no-repeat;
    background-size: 200% 100%; /* stretched to can dimensions */
    /* border slightly to hide tiny gaps */
    box-shadow: 0 0 0.4px rgba(0,0,0,0.12) inset;
  }

  /* subtle shading overlay to suggest curvature */
  .slice::after{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    background:linear-gradient(90deg, rgba(0,0,0,var(--lighting)) 0%, rgba(255,255,255,0.02) 45%, rgba(0,0,0,var(--lighting)) 100%);
    mix-blend-mode:multiply;
  }

  /* top and bottom lids */
  .lid{
    position:absolute;
    left:50%;
    width: calc(var(--can-width) * 1.02);
    height: calc(var(--can-width) * 1.02);
    border-radius:50%;
    transform-origin:center;
    background-image: url('/mnt/data/p1.png');
    background-repeat:no-repeat;
    background-size: 100% auto;
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    overflow:hidden;
  }

  .lid.top{
    top: -calc(var(--can-width) * 0.51);
    transform: translateX(-50%) rotateX(88deg) translateZ(calc(var(--can-width) * 0.005));
    filter: brightness(0.95) saturate(0.9);
  }

  .lid.bottom{
    bottom: -calc(var(--can-width) * 0.51);
    transform: translateX(-50%) rotateX(92deg) translateZ(calc(var(--can-width) * 0.005));
    filter: brightness(0.85);
  }

  /* optional caption */
  .caption{
    position:absolute;
    bottom:-58px;
    width:100%;
    text-align:center;
    color:#ddd;
    font-size:14px;
    opacity:0.9;
  }

  @keyframes spin{
    from{ transform: rotateY(0deg) translateZ(0); }
    to  { transform: rotateY(-360deg) translateZ(0); }
  }

  /* responsive smaller can on narrow screens */
  @media (max-width:480px){
    :root{
      --can-width: 140px;
      --can-height: 380px;
    }
  }
</style>
</head>
<body>

  <div class="stage">
    <div class="can-3d" id="can">
      <!-- slices will be injected here by JS -->
      <div class="lid top" id="lidTop"></div>
      <div class="lid bottom" id="lidBottom"></div>
      <div class="caption">Hover to pause Â· Image: /mnt/data/p1.png</div>
    </div>
  </div>

<script>
/*
  Build a cylinder from many narrow vertical slices (divs).
  Each slice is rotated and translated around Y to approximate a cylinder.
  The script computes slice width so the image maps around smoothly.
*/

(function(){
  const can = document.getElementById('can');
  const totalSlices = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--slices')) || 72;
  const canWidth = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--can-width'));
  const canHeight = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--can-height'));

  // CSS values include "px" so convert to numbers in px:
  const px = (raw)=>{
    if (!raw) return 0;
    return parseFloat(raw.replace('px',''));
  };

  const widthPx = px(getComputedStyle(document.documentElement).getPropertyValue('--can-width'));
  const heightPx = px(getComputedStyle(document.documentElement).getPropertyValue('--can-height'));

  // Choose radius ~ half width
  const radius = widthPx / 2;

  // circumference
  const circumference = 2 * Math.PI * radius;

  // width of each slice in px (approx)
  const sliceW = Math.max(1, circumference / totalSlices);

  // We will create 'totalSlices' divs. To map texture horizontally we set background-position-x appropriately.
  for(let i=0;i<totalSlices;i++){
    const slice = document.createElement('div');
    slice.className = 'slice';
    // Set actual width slightly larger to avoid tiny seams
    slice.style.width = Math.ceil(sliceW + 0.3) + 'px';
    slice.style.marginLeft = -(Math.ceil(sliceW + 0.3) / 2) + 'px'; // center at left:50%
    // Calculate rotation for this slice
    const angle = (360/totalSlices) * i;
    // Place slice on circle
    slice.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
    // size and background mapping
    slice.style.height = heightPx + 'px';
    // background-size must correspond to full can unwrapped: set width 100% then offset horizontally
    slice.style.backgroundPosition = `${(i/totalSlices)*100}% 0%`;
    slice.style.backgroundSize = `${totalSlices * 100}% 100%`; // stretch so each slice picks a vertical strip
    // Append
    can.appendChild(slice);
  }

  // Setup lids background-position so top and bottom pick the center horizontal strip of the image
  const lidTop = document.getElementById('lidTop');
  const lidBottom = document.getElementById('lidBottom');
  // Make lids use the middle part of the image: we set background-position to center horizontally and show a small vertical portion.
  lidTop.style.backgroundPosition = '50% 10%';
  lidTop.style.backgroundSize = '200% 200%';
  lidBottom.style.backgroundPosition = '50% 85%';
  lidBottom.style.backgroundSize = '200% 200%';

})();
</script>

</body>
</html>